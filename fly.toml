app = "n8nxio"
primary_region = "iad"

[build]
  image = "jenercruz/n8nxio:main"

[env]
  GENERIC_TIMEZONE = "America/Mexico_City"
  WEBHOOK_TUNNEL_URL = "https://n8nxio.fly.dev"
  N8N_HOST = "0.0.0.0"
  N8N_LOG_LEVEL = "error"
  N8N_PROTOCOL = "https"
  N8N_EDITOR_BASE_URL = "https://n8nxio.fly.dev"
  N8N_RUNNERS_ENABLED = true
  N8N_BLOCK_ENV_IN_NODE = false
  N8N_PORT = 5678

[[mounts]]
  source = "n8n_data"
  destination = "/home/node/.n8n"

[http_service]
  internal_port = 5678
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true

[http_service.concurrency]
  type = "requests"
  hard_limit = 250
  soft_limit = 200

[[services.ports]]
  port = 80
  handlers = ["http"]

[[services.ports]]
  port = 443
  handlers = ["tls", "http"]

[[vm]]
  memory = "1gb"
  cpu_kind = "shared"
  cpus = 1
